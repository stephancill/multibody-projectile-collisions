<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Gr 11 Physics</title>
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    </head>
    <body id="grad">
        <div id="center-col">
            <h1>Simulation of Projectile Motion and Collisions in 2D Space (2017)</h1>
            <div id="center-row">
                <div class="name">
                    Stephan Cilliers <br>
                    Parklands College <br>
                    Cape Town, South Africa
                    <a href="mailto:scilliers@parklands.co.za">scilliers@parklands.co.za</a>
                </div>
                <div class="name">
                    Emile Tredoux <br>
                    Parklands College <br>
                    Cape Town, South Africa
                    <a href="mailto:etredoux@parklands.co.za">etredoux@parklands.co.za</a> 
                </div>
            </div>
            <canvas id="canvas" width="1000" height="400" style="margin-top: 20px"></canvas>
            <div style="margin-top: 20px; text-align: right;">
                <button id="start" type="button" class="bttn-simple bttn-md">Start</button>
                <button id="reset" class="bttn-simple bttn-md">Reset</button>
                <button id="load" class="bttn-simple bttn-md">Load Preset</button>
                <select id="presets"> </select>
            </div>
               
        </div>
        <br>

        <form id="newProjectileForm" onsubmit="return false">
            <br>
            <span><strong>Add projectile:</strong></span>
            <br>
            <span>Position (initial)</span><button onclick="selectPosition=true;" type="button" name="button">Click for pos</button>
            <br>
            <span>  x: </span><input id="inputPosX" style="width:75px" type="number" name="" value="600">
            <span>  y: </span><input id="inputPosY" style="width:75px" type="number" name="" value="280">
            <br>
            <span>Velocity (initial)</span>
            <br>
            <span>  x: </span><input id="inputVelX" style="width:75px" type="number" name="" value="0">
            <span>  y: </span><input id="inputVelY" style="width:75px" type="number" name="" value="0">
            <br>
            <select class="" id="inputColor">
                <option value="red">Red</option>
                <option value="green">Green</option>
                <option value="blue">Blue</option>
            </select>
            <button id="addProjectileButton" type="submit" name="button">Add</button>
            <br>
            <br>
        </form>

        <div id="logging" class="logging">
            <div id="projectiles" class=""></div>
        </div>

    </body>
</html>
<link rel="stylesheet" href="./css/style.css">

<!-- Dependencies -->
<script>var cc, rect;</script>
<script src="./scripts/Projectile.js" type="text/javascript"></script>
<script src="./scripts/collision_handler.js"></script>
<script src="./scripts/Presets.js"></script>

<!-- Main Script -->
<script src="./scripts/scene.js" type="text/javascript"></script>

<!-- Canvas controller -->
<script type="text/javascript">

var selectPosition = false

function getRandomArbitrary(min, max) {
    return Math.random() * (max - min) + min;
}

window.onload = function () {
    c = document.getElementById("canvas");
    cc = c.getContext("2d");

    // Set form min/max values
    rect = c.getBoundingClientRect();
    document.getElementById("inputPosX").min = 0
    document.getElementById("inputPosX").max = rect.right
    document.getElementById("inputPosY").min = 0
    document.getElementById("inputPosY").max = rect.bottom

    // Populate presets
    var html = ``
   
    for (var key in Presets) {
        if (Presets.hasOwnProperty(key)) {
            html += `<option value="${key}">${key}</option>`
        }
    }

    document.getElementById("presets").innerHTML = html

    reset()
}

window.onresize = function() {
    render()
    
    // Set form min/max values
    rect = c.getBoundingClientRect();
    document.getElementById("inputPosX").min = 0
    document.getElementById("inputPosX").max = rect.right
    document.getElementById("inputPosY").min = 0
    document.getElementById("inputPosY").max = rect.bottom
}

// Form events
document.getElementById("start").addEventListener("click", start)
document.getElementById("addProjectileButton").addEventListener("click", addProjectile)
document.getElementById("reset").addEventListener("click", reset)
document.getElementById("load").addEventListener("click", loadScene)

</script>
